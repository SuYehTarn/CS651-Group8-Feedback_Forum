<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Feedback Forum Tutorial - Auth</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js" integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf" crossorigin="anonymous"></script>
</head>
<body>
<header class="d-flex justify-content-center py-3">
    <ul class="nav nav-pills">
        <li class="nav-item"><a href="./index.html" class="nav-link active">Feedback Forum</a></li>
        <li class="nav-item"><a href="./intro.html" class="nav-link">Introduction</a></li>
        <li class="nav-item"><a href="./setup.html" class="nav-link">Setup</a></li>
        <li class="nav-item"><a href="./basics.html" class="nav-link">Basic Files</a></li>
        <li class="nav-item"><a href="./models.html" class="nav-link">Database Models</a></li>
        <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" data-bs-toggle="dropdown" href="#" role="button" aria-expanded="false">Blueprints</a>
            <ul class="dropdown-menu">
                <li><a class="dropdown-item" href="./main.html">Main</a></li>
                <li><a class="dropdown-item" href="./admin.html">Admin</a></li>
                <li><a class="dropdown-item" href="./auth.html">Auth</a></li>
            </ul>
        </li>
        <li class="nav-item"><a href="./email.html" class="nav-link">Email Sending</a></li>
    </ul>
</header>

<div class="container">
    <h1>Auth</h1>
    <p>Auth is the Flask blueprint for the authentication. We create files as the following picture.</p>
    <img class="my-3 shadow-sm" src="img/auth.png">
    <ul>
        <li>__init__.py: initializing the blueprint for importing from other place.</li>
        <li>views.py: setting the routes and logics for HTTP requests.</li>
        <li>forms.py: containing the form for administrator login.</li>
    </ul>
</div>

<div class="container">
    <h2>__init__.py</h2>
    <p>We initialize the blueprint with <a href="https://github.com/SuYehTarn/CS651_Python_Flask_Group8/blob/main/app/auth/__init__.py">this code</a>.</p>
    <p>We create a blueprint named <b>auth</b>, import the route settings from the file <b>view.py</b>.</p>
</div>

<div class="container">

    <h2>views.py</h2>
    <p>We setting the routes and logics with <a href="https://github.com/SuYehTarn/CS651_Python_Flask_Group8/blob/main/app/auth/views.py">this code</a>.</p>
    <p>We defined two entry functions: login and logout. <b>logout</b> is decorated with <b>login_required</b>, requiring the user being authenticated.</p>

    <h3>login</h3>
    <p>This is the entry function for the administrator login routing with the url '/login'. It accepts GET and POST request methods. If the method is GET, it returns the login form with the template <a href="https://github.com/SuYehTarn/CS651_Python_Flask_Group8/blob/main/app/Templates/auth/login.html">'/auth/login.html'</a>. If the method is POST, it collect the name and password from the request, verifying if the administrator exists. If the information correct, the user will be authenticated and be redirected to the backstage. Otherwise, it shows the error message and stay in the the login page.</p>

    <h3>logout</h3>
    <p>This is the entry function for the admin to logout their account routing with the url '/logout'. If the request is from a administrator already login, the user logout and be redirected to the front end.</p>
</div>

<div class="container">
    <h2>forms.py</h2>
    <p>We design the relating forms with <a href="https://github.com/SuYehTarn/CS651_Python_Flask_Group8/blob/main/app/auth/forms.py">this code</a>.</p>
    <p>We defined one form class with the FlaskForm class provided by flask-wtf: LoginForm.</p>
    <h3>LoginForm</h3>
    <p>This form contains two string fields for input the account information, one checkbox for specifying keeping logged in or not, and a submit button for sending the post request.</p>
</div>

</body>
</html>